const a0_0xe0b2af=a0_0x2a9a;(function(_0x447f46,_0x46daeb){const _0x49def8=a0_0x2a9a,_0x426468=_0x447f46();while(!![]){try{const _0x13ba99=-parseInt(_0x49def8(0x133))/0x1*(parseInt(_0x49def8(0x151))/0x2)+-parseInt(_0x49def8(0x173))/0x3*(parseInt(_0x49def8(0x182))/0x4)+parseInt(_0x49def8(0x188))/0x5+parseInt(_0x49def8(0x169))/0x6+parseInt(_0x49def8(0x160))/0x7+parseInt(_0x49def8(0x131))/0x8*(-parseInt(_0x49def8(0x168))/0x9)+parseInt(_0x49def8(0x14a))/0xa*(parseInt(_0x49def8(0x14f))/0xb);if(_0x13ba99===_0x46daeb)break;else _0x426468['push'](_0x426468['shift']());}catch(_0x480adc){_0x426468['push'](_0x426468['shift']());}}}(a0_0x46a7,0x748dd));function a0_0x2a9a(_0x51d561,_0x2293b2){const _0x46a7da=a0_0x46a7();return a0_0x2a9a=function(_0x2a9aa9,_0x4fda2e){_0x2a9aa9=_0x2a9aa9-0x128;let _0x151bab=_0x46a7da[_0x2a9aa9];return _0x151bab;},a0_0x2a9a(_0x51d561,_0x2293b2);}function a0_0x46a7(){const _0x3c44b0=['prototype','bleAdapterSearchState','_onValueChange','发送了：','---needCmd\x20=\x20','offBluetoothAdapterStateChange','682050iMsPlC','getInfosCallback','ios','bleDevice','notifyBLECharacteristicValueChange','_openBleAdapter','---bytelength=','_onBleAdapterStateChange','printer','setPrinter','deviceId','sendData','scanDevicesCallback','useOutBleListen','closeBluetoothAdapter','8ITCOze','push','devices','bleAdapterStateReady','createBLEConnection','services','2866815RsbaTm','connectDeviceFound','---收到数据:','slice','forEach','createData','onBluetoothAdapterStateChange','BleAdapterState:--------------------1','isSendPictureDataing','getBLEDeviceServices','writeC','dealData','openPrinterCallback','openPrinterCallbackFaill','getBluetoothDevices','central','80akwurS','serviceId','127pGrGUx','map','characteristicId','0000FFE1-0000-1000-8000-00805F9B34FB','discovering','BEF8D6C9-9C21-4C9E-B632-BD58C1009F9F','E7810A71-73AE-499D-8C15-FAA9AEF0C3F2','characteristics','0000E3E5-0000-1000-8000-00805F9B34FB','value','getBluetoothAdapterState','offBLEConnectionStateChange','writeBLECharacteristicValue','needCMD','_stopBleDiscovery','_getFoundPrinterByName','----走了失败','scanDevice','openBluetoothAdapter','stopBluetoothDevicesDiscovery','name','_getDeviceServices','manager','649830saiqBO','openPrinter','repeatTimeoutId','debug','curSendData','11kCzaqo','closeBLEConnection','1478ndSoBM','setBLEMTU','offBluetoothDeviceFound','byteLength','length','readC','getUint8','_getFoundDevices','log','toString','_getBleAdapterState','_createBleConnection','call','connected','available','3689091dnrvwf','platform','对象不存在','toUpperCase','bleConnectionState','uuid','_getDeviceCharacteristics','FFE1','343593FdFFSk','1454214rsHAdu','startBluetoothDevicesDiscovery','sendPrintError','_startBleDiscovery'];a0_0x46a7=function(){return _0x3c44b0;};return a0_0x46a7();}import a0_0x2b97b2 from'./JCDataUntil';import a0_0x43e456 from'./JCAPIErrorCode';function ab2hex(_0x38908c){const _0x141a87=a0_0x2a9a,_0x4e07bd=Array['prototype'][_0x141a87(0x134)][_0x141a87(0x15d)](new Uint8Array(_0x38908c),function(_0x336a0b){const _0x2d01e9=_0x141a87;return('00'+_0x336a0b[_0x2d01e9(0x15a)](0x10))[_0x2d01e9(0x18b)](-0x2);});return _0x4e07bd['join']('');}function Ble(_0x85a66a){const _0x200e60=a0_0x2a9a;this['bleAdapterStateReady']=![],this[_0x200e60(0x16e)]=![],this[_0x200e60(0x17f)]=null,this['scanDevice']=[],this[_0x200e60(0x149)]=_0x85a66a,this[_0x200e60(0x17a)]();}Ble[a0_0xe0b2af(0x16d)]={'constructor':Ble,'scanedPrinters':function(_0x5b0647){const _0x5cf991=a0_0xe0b2af;let _0x4feee7=this;var _0x243d89=function(){_0x5b0647!=null&&_0x5b0647([]);},_0xdb8265=function(){const _0x136b37=a0_0x2a9a;var _0x1bff83=function(){_0x4feee7['_startBleDiscovery'](),setTimeout(()=>{const _0x809bd3=a0_0x2a9a;_0x4feee7[_0x809bd3(0x141)]();let _0x4687c4=function(){const _0x4ad4a4=_0x809bd3;_0x5b0647&&_0x5b0647(_0x4feee7[_0x4ad4a4(0x144)]);};_0x4feee7[_0x809bd3(0x144)]=[],_0x4feee7[_0x809bd3(0x158)](_0x4687c4);},0xbb8);};_0x4feee7[_0x136b37(0x15b)](_0x1bff83,_0x243d89);};this[_0x5cf991(0x178)](_0xdb8265,_0x243d89);},'closePrinter':function(){const _0x24091f=a0_0xe0b2af;if(this[_0x24091f(0x176)]!=null&&this[_0x24091f(0x176)][_0x24091f(0x17d)]!=null){let _0x219178=this;wx[_0x24091f(0x150)]({'deviceId':_0x219178[_0x24091f(0x176)][_0x24091f(0x17d)],'complete':()=>{const _0x633a56=_0x24091f;_0x219178[_0x633a56(0x149)][_0x633a56(0x17b)]=null;}});}},'openPrinter':function(_0x4458a8,_0x3f47c5,_0xde042a){const _0x3aab92=a0_0xe0b2af;let _0x2c839e=this;if(this[_0x3aab92(0x164)]){this[_0x3aab92(0x12e)]&&(this[_0x3aab92(0x12e)]=function(){const _0xfa5283=_0x3aab92;_0x2c839e[_0xfa5283(0x176)]=null,_0x2c839e[_0xfa5283(0x149)]['printer']=null,setTimeout(()=>{const _0x3f6251=_0xfa5283;_0x2c839e[_0x3f6251(0x14b)](_0x4458a8,_0x3f47c5,_0xde042a);},0x1f4);});this[_0x3aab92(0x176)]!=null&&this['bleDevice'][_0x3aab92(0x17d)]!=null&&wx[_0x3aab92(0x150)]({'deviceId':_0x2c839e[_0x3aab92(0x176)][_0x3aab92(0x17d)]});return;}var _0x22bd32=_0xde042a,_0x17437c=function(){const _0x28d696=_0x3aab92;(_0x2c839e[_0x28d696(0x149)]['debug']&0x1)==0x1&&console[_0x28d696(0x159)](_0x28d696(0x143));if(_0x22bd32!=null){let _0x38a62f=_0x22bd32;_0x22bd32=null,_0x38a62f();}},_0x141399=![],_0x3afdd4=![],_0x330002=function(){const _0x4d9971=_0x3aab92;if(_0x141399)return;_0x141399=!![];var _0x3dd692=function(){const _0x35564a=a0_0x2a9a;_0x3afdd4=!![],_0x2c839e[_0x35564a(0x16c)]();var _0x22a34e=setTimeout(()=>{const _0x120262=_0x35564a;(_0x2c839e[_0x120262(0x149)][_0x120262(0x14d)]&0x1)==0x1&&console['log']('--------timeout');_0x2c839e[_0x120262(0x141)]();if(_0x2c839e[_0x120262(0x189)]==![]){_0x17437c();return;}if(_0x3afdd4)return;_0x17437c();},0x3a98);let _0x26523d=function(_0x1e660d){const _0x409ec8=_0x35564a;clearTimeout(_0x22a34e);let _0xa26978=_0x1e660d[_0x409ec8(0x17d)];if(_0xa26978!=null){let _0x30b96d=![],_0x45d878=function(_0x58a29b){const _0x5be38e=_0x409ec8;if(_0x30b96d)return;_0x30b96d=!![];let _0x3b12a9=function(_0x168cbc){const _0x558391=a0_0x2a9a;let _0x25b378=function(_0x24a764){let _0x528a03=function(){let _0x5c706b=function(){const _0x52dca3=a0_0x2a9a;_0x2c839e[_0x52dca3(0x12d)]=_0x3f47c5,_0x2c839e['openPrinterCallbackFaill']=_0xde042a,_0x2c839e[_0x52dca3(0x176)]={},_0x2c839e[_0x52dca3(0x176)]['deviceId']=_0x58a29b,_0x2c839e[_0x52dca3(0x176)][_0x52dca3(0x132)]=_0x168cbc,_0x2c839e[_0x52dca3(0x176)][_0x52dca3(0x12b)]=_0x24a764,_0x2c839e[_0x52dca3(0x176)][_0x52dca3(0x156)]=_0x24a764,_0x2c839e['bleDevice'][_0x52dca3(0x147)]=_0x4458a8;if(_0x2c839e['manager'][_0x52dca3(0x180)]){}else _0x2c839e[_0x52dca3(0x16f)]();let _0x1687d4=a0_0x2b97b2[_0x52dca3(0x18d)](0xc1,0x1);_0x1687d4=a0_0x2b97b2['insertAtHeadOfBuffer'](0x3,_0x1687d4),_0x2c839e[_0x52dca3(0x149)][_0x52dca3(0x140)]=0xc2,_0x2c839e[_0x52dca3(0x17e)](_0x1687d4,0x9,()=>{const _0x2b23a3=_0x52dca3;_0x2c839e[_0x2b23a3(0x12e)]&&(_0x2c839e[_0x2b23a3(0x12e)]=function(){const _0x1d8cc3=_0x2b23a3;_0x2c839e[_0x1d8cc3(0x176)]=null,_0x2c839e[_0x1d8cc3(0x149)][_0x1d8cc3(0x17b)]=null,_0x17437c();}),wx['closeBLEConnection']({'deviceId':_0x2c839e[_0x2b23a3(0x176)][_0x2b23a3(0x17d)]});});};_0x2c839e['_notiCharacteristic'](_0x58a29b,_0x168cbc,_0x24a764,_0x5c706b,_0x17437c);};_0x528a03();};_0x2c839e[_0x558391(0x166)](_0x58a29b,_0x168cbc,_0x25b378,_0x17437c);};_0x2c839e[_0x5be38e(0x148)](_0x58a29b,_0x3b12a9,_0x17437c);};_0x2c839e['_onConnectionStateChange'](_0x45d878);if(_0x2c839e[_0x409ec8(0x149)][_0x409ec8(0x161)]==_0x409ec8(0x175))_0x2c839e[_0x409ec8(0x15c)](_0xa26978,_0x17437c);else{var _0x1e422e=0x0;let _0x5c5112=function(){_0x1e422e++,setTimeout(()=>{const _0x12d2d6=a0_0x2a9a;_0x1e422e<0x3?_0x2c839e[_0x12d2d6(0x15c)](_0xa26978,_0x5c5112):_0x2c839e['_createBleConnection'](_0xa26978,_0x17437c);},0x3e8);};_0x5c5112();}}else _0x17437c();};_0x2c839e[_0x35564a(0x142)](_0x4458a8,_0x26523d);};_0x2c839e[_0x4d9971(0x15b)](_0x3dd692,_0x17437c);};this[_0x3aab92(0x178)](_0x330002,_0x17437c);},'sendData':function(_0x116824,_0x48f580=0xa,_0x19ab5a){const _0x460911=a0_0xe0b2af;if(this[_0x460911(0x176)]==null||this['bleDevice']===undefined||this[_0x460911(0x176)][_0x460911(0x17d)]===undefined){(this[_0x460911(0x149)][_0x460911(0x14d)]&0x1)==0x1&&console['log'](_0x460911(0x162));this['repeatTimeoutId']&&this[_0x460911(0x14c)]>0x0&&(clearTimeout(this['repeatTimeoutId']),this['repeatTimeoutId']=0x0);return;}(this[_0x460911(0x149)][_0x460911(0x14d)]&0x100)==0x100&&console['log'](_0x460911(0x170)+ab2hex(_0x116824));this[_0x460911(0x149)][_0x460911(0x14e)]=_0x116824;var _0x2238f8=this;wx[_0x460911(0x13f)]({'characteristicId':this['bleDevice'][_0x460911(0x12b)],'deviceId':this['bleDevice'][_0x460911(0x17d)],'serviceId':this[_0x460911(0x176)][_0x460911(0x132)],'value':_0x116824,'success':_0x1396fb=>{},'fail':_0x21d15b=>{},'complete':()=>{const _0x49b282=_0x460911;_0x48f580>0x0?_0x2238f8['repeatTimeoutId']=setTimeout(()=>{const _0x4f3940=a0_0x2a9a;if(_0x2238f8[_0x4f3940(0x149)]['printer']&&_0x2238f8[_0x4f3940(0x149)]['printer'][_0x4f3940(0x129)])return;const _0xf45c72=new DataView(_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x14e)]);if(_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x14e)]&&_0x2238f8[_0x4f3940(0x149)]['curSendData'][_0x4f3940(0x154)]>0x5){let _0x2f0802=_0xf45c72[_0x4f3940(0x157)](0x2);(_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x14d)]&0x100)==0x100&&console[_0x4f3940(0x159)]('重复发送了-----2---command='+_0x2f0802+_0x4f3940(0x179)+_0x2238f8['manager'][_0x4f3940(0x14e)][_0x4f3940(0x154)]+_0x4f3940(0x171)+_0x2238f8[_0x4f3940(0x149)]['needCMD']);if(_0x2f0802==0x86&&_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x140)]!=0xd3)return;else{if(_0x2f0802==0x13&&_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x140)]!=0x14)return;else{if(_0x2f0802==0xf3&&_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x140)]!=0xf4)return;else{if(_0x2f0802==0xa3&&_0x2238f8[_0x4f3940(0x149)][_0x4f3940(0x140)]!=0xb3)return;}}}}_0x2238f8[_0x4f3940(0x17e)](_0x2238f8[_0x4f3940(0x149)]['curSendData'],--_0x48f580,_0x19ab5a);},0x1f4):(_0x2238f8[_0x49b282(0x149)]['curSendData']=null,_0x19ab5a&&_0x19ab5a());}});},'clearRepeatAction':function(){const _0x4ed8b1=a0_0xe0b2af;this[_0x4ed8b1(0x14c)]>0x0&&(clearTimeout(this[_0x4ed8b1(0x14c)]),this['repeatTimeoutId']=0x0);},'_getFoundPrinterByName':function(_0x3142ee,_0x2f4d6d){const _0x455017=a0_0xe0b2af;let _0x3141c9=this;var _0x3f11fa=![];this[_0x455017(0x189)]=![],wx[_0x455017(0x153)](),wx['onBluetoothDeviceFound'](_0x4141ce=>{const _0x5dcaa0=_0x455017;if(_0x3f11fa)return;if(_0x4141ce['devices']['length']>0x0){var _0x2341a2=_0x4141ce[_0x5dcaa0(0x184)][0x0];_0x2341a2[_0x5dcaa0(0x147)]==_0x3142ee&&(_0x3f11fa=!![],_0x3141c9[_0x5dcaa0(0x189)]=!![],_0x2f4d6d&&(_0x3141c9[_0x5dcaa0(0x141)](),(_0x3141c9[_0x5dcaa0(0x149)][_0x5dcaa0(0x14d)]&0x1)==0x1&&console[_0x5dcaa0(0x159)]('-------搜索到设备'),_0x2f4d6d(_0x2341a2)));}});},'_onValueChange':function(){let _0x263498=this;wx['onBLECharacteristicValueChange'](_0x312450=>{const _0x1a40d7=a0_0x2a9a;(_0x263498[_0x1a40d7(0x149)][_0x1a40d7(0x14d)]&0x1000)==0x1000&&console[_0x1a40d7(0x159)](_0x1a40d7(0x18a)+ab2hex(_0x312450[_0x1a40d7(0x13c)])),a0_0x2b97b2[_0x1a40d7(0x12c)](_0x312450[_0x1a40d7(0x13c)],_0x263498[_0x1a40d7(0x149)]);});},'onOutValueChange':function(_0x836c3d){const _0x306c38=a0_0xe0b2af;(_0x836c3d[_0x306c38(0x135)]['toUpperCase']()==_0x306c38(0x138)||_0x836c3d[_0x306c38(0x135)][_0x306c38(0x163)]()=='FFE1'||_0x836c3d[_0x306c38(0x135)][_0x306c38(0x163)]()==_0x306c38(0x136))&&((this[_0x306c38(0x149)][_0x306c38(0x14d)]&0x1000)==0x1000&&console[_0x306c38(0x159)](_0x306c38(0x18a)+ab2hex(_0x836c3d[_0x306c38(0x13c)])),a0_0x2b97b2['dealData'](_0x836c3d[_0x306c38(0x13c)],this[_0x306c38(0x149)]));},'_notiCharacteristic':function(_0x102f9b,_0x2764d8,_0x3ec902,_0x1f651f,_0x4ca95a){const _0x869bdc=a0_0xe0b2af;wx[_0x869bdc(0x177)]({'deviceId':_0x102f9b,'serviceId':_0x2764d8,'characteristicId':_0x3ec902,'state':!![],'success':_0x2ae501=>{_0x1f651f&&_0x1f651f();},'fail':_0x96aa15=>{_0x4ca95a&&_0x4ca95a();}});},'_readCharacteristic':function(_0x48e1fb,_0x2e23e6,_0x3c02c4,_0x11fe02,_0x5caac8){wx['readBLECharacteristicValue']({'characteristicId':_0x3c02c4,'deviceId':_0x48e1fb,'serviceId':_0x2e23e6,'success':_0x4d7bb4=>{_0x11fe02&&_0x11fe02();},'fail':_0xad2bd=>{_0x5caac8&&_0x5caac8();}});},'_getDeviceCharacteristics':function(_0x286547,_0x49eaab,_0x553c76,_0x32f030){wx['getBLEDeviceCharacteristics']({'deviceId':_0x286547,'serviceId':_0x49eaab,'success':_0x41cd68=>{const _0x5407be=a0_0x2a9a;var _0x57bdd7=![];for(var _0x1df83b in _0x41cd68[_0x5407be(0x13a)]){var _0xc3e627=_0x41cd68['characteristics'][_0x1df83b];if(_0xc3e627['uuid']['toUpperCase']()==_0x5407be(0x138)||_0xc3e627[_0x5407be(0x165)]['toUpperCase']()==_0x5407be(0x167)||_0xc3e627[_0x5407be(0x165)][_0x5407be(0x163)]()==_0x5407be(0x136)){_0x57bdd7=!![];_0x553c76&&_0x553c76(_0xc3e627[_0x5407be(0x165)]);break;}}!_0x57bdd7&&_0x32f030&&_0x32f030();},'fail':_0x32e8ce=>{_0x32f030&&_0x32f030();}});},'_getDeviceServices':function(_0x163c45,_0x23832a,_0x51df92){const _0xeaa0a=a0_0xe0b2af;wx[_0xeaa0a(0x12a)]({'deviceId':_0x163c45,'success':_0xe06a9f=>{const _0x3de3e9=_0xeaa0a;let _0x2092b4=![];for(let _0x181595 in _0xe06a9f[_0x3de3e9(0x187)]){let _0xd083f7=_0xe06a9f[_0x3de3e9(0x187)][_0x181595];if(_0xd083f7['uuid']['toUpperCase']()==_0x3de3e9(0x139)||_0xd083f7[_0x3de3e9(0x165)][_0x3de3e9(0x163)]()=='0000E0FF-3C17-D293-8E48-14FE2E4DA212'||_0xd083f7[_0x3de3e9(0x165)][_0x3de3e9(0x163)]()==_0x3de3e9(0x13b)){_0x23832a&&_0x23832a(_0xd083f7[_0x3de3e9(0x165)]);_0x2092b4=!![];break;}}!_0x2092b4&&_0x51df92&&_0x51df92();},'fail':_0x332d88=>{_0x51df92&&_0x51df92();}});},'_onConnectionStateChange':function(_0xbb87a8,_0x393fc7){let _0x42b793=this;wx['offBLEConnectionStateChange'](),wx['onBLEConnectionStateChange'](_0x5c6c01=>{const _0xde0db4=a0_0x2a9a;(_0x42b793[_0xde0db4(0x149)]['debug']&0x1)==0x1&&console[_0xde0db4(0x159)](_0x5c6c01),_0x42b793[_0xde0db4(0x164)]=_0x5c6c01['connected'],_0x5c6c01[_0xde0db4(0x15e)]?_0xbb87a8&&_0xbb87a8(_0x5c6c01[_0xde0db4(0x17d)]):(_0x42b793['manager']&&_0x42b793[_0xde0db4(0x149)]['clear'](),_0x42b793['repeatTimeoutId']>0x0&&clearTimeout(_0x42b793[_0xde0db4(0x14c)]),_0x42b793[_0xde0db4(0x176)]!=null&&_0x42b793[_0xde0db4(0x176)][_0xde0db4(0x17d)]!=null&&(_0x42b793['bleDevice'][_0xde0db4(0x17d)]=null,_0x42b793[_0xde0db4(0x176)]=null,_0x42b793['openPrinterCallbackFaill']&&_0x42b793[_0xde0db4(0x12e)](),wx[_0xde0db4(0x13e)](),wx[_0xde0db4(0x153)](),wx['offBluetoothAdapterStateChange'](),wx[_0xde0db4(0x181)]()),_0x393fc7&&_0x393fc7());},_0x5eeade=>{const _0x5cfbed=a0_0x2a9a;(_0x42b793['manager'][_0x5cfbed(0x14d)]&0x1)==0x1&&console['log'](_0x5eeade);});},'_createBleConnection':function(_0x5deb6c,_0x2838e6){const _0x51842a=a0_0xe0b2af;let _0x22bd89=this;wx[_0x51842a(0x186)]({'deviceId':_0x5deb6c,'success':_0x488579=>{const _0x2ed438=_0x51842a;_0x22bd89[_0x2ed438(0x149)][_0x2ed438(0x161)]=='android'&&wx[_0x2ed438(0x152)]({'deviceId':_0x5deb6c,'mtu':0xdf});},'fail':_0x377a73=>{const _0x371e79=_0x51842a;(_0x22bd89[_0x371e79(0x149)]['debug']&0x1)==0x1&&console['log'](_0x377a73),_0x2838e6&&_0x2838e6();},'complete':()=>{}});},'_containDevice':function(_0x55b265){const _0x1c1c6e=a0_0xe0b2af;let _0x5722ca=null;(this[_0x1c1c6e(0x149)][_0x1c1c6e(0x14d)]&0x1)==0x1&&console['log'](this['scanDevice']);for(let _0x42a06d=0x0;_0x42a06d<this[_0x1c1c6e(0x144)][_0x1c1c6e(0x155)];_0x42a06d++){let _0x345aa0=this[_0x1c1c6e(0x144)][_0x42a06d];if(_0x345aa0[_0x1c1c6e(0x147)]==_0x55b265){_0x5722ca=_0x345aa0['deviceId'];break;}}return _0x5722ca;},'_getFoundDevices':function(_0x2eca99){const _0x7567b5=a0_0xe0b2af;let _0x1bbead=this;wx[_0x7567b5(0x12f)]({'success':_0x94f9ed=>{const _0x251a73=_0x7567b5;var _0x24eb99=_0x94f9ed[_0x251a73(0x184)];_0x24eb99[_0x251a73(0x18c)](_0x22770c=>{const _0x4e48be=_0x251a73;_0x1bbead[_0x4e48be(0x144)][_0x4e48be(0x183)](_0x22770c);}),_0x2eca99&&_0x2eca99();}});},'_stopBleDiscovery':function(){const _0x35e6b4=a0_0xe0b2af;wx[_0x35e6b4(0x146)]({'complete':()=>{}});},'_startBleDiscovery':function(){const _0x5de63d=a0_0xe0b2af;wx[_0x5de63d(0x16a)]({'allowDuplicatesKey':!![]});},'_getBleAdapterState':function(_0x27a7c2,_0x128d35){const _0x59e01b=a0_0xe0b2af;let _0x20f574=this;(this[_0x59e01b(0x149)][_0x59e01b(0x14d)]&0x1)==0x1&&console[_0x59e01b(0x159)](_0x59e01b(0x128)),wx[_0x59e01b(0x13d)]({'success':_0x2eee49=>{const _0x19d935=_0x59e01b;(_0x20f574[_0x19d935(0x149)]['debug']&0x1)==0x1&&console[_0x19d935(0x159)]('BleAdapterState:--------------------succ'),_0x27a7c2&&_0x27a7c2();},'fail':_0x1b0dc7=>{_0x128d35&&_0x128d35();}});},'_openBleAdapter':function(_0x445d44,_0x401991){const _0xdd025c=a0_0xe0b2af;wx[_0xdd025c(0x145)]({'mode':_0xdd025c(0x130),'success':_0x1e19d7=>{_0x445d44&&_0x445d44();},'fail':_0x1ac958=>{_0x401991&&_0x401991();}});},'_onBleAdapterStateChange':function(){const _0x30af97=a0_0xe0b2af;let _0x4d4c94=this;wx[_0x30af97(0x172)](),wx[_0x30af97(0x18e)](_0x43fe44=>{const _0x9b5805=_0x30af97;_0x4d4c94[_0x9b5805(0x185)]=_0x43fe44[_0x9b5805(0x15f)],_0x4d4c94[_0x9b5805(0x16e)]=_0x43fe44[_0x9b5805(0x137)],_0x43fe44[_0x9b5805(0x15f)]==![]&&(wx[_0x9b5805(0x13e)](),wx[_0x9b5805(0x153)](),wx['offBluetoothAdapterStateChange'](),wx['closeBluetoothAdapter'](),_0x4d4c94[_0x9b5805(0x149)]&&_0x4d4c94[_0x9b5805(0x149)]['printer']&&(_0x4d4c94[_0x9b5805(0x149)][_0x9b5805(0x140)]==0xb3||_0x4d4c94[_0x9b5805(0x149)]['needCMD']==0x2||_0x4d4c94['manager'][_0x9b5805(0x140)]==0xd3||_0x4d4c94['manager'][_0x9b5805(0x140)]==0x14||_0x4d4c94[_0x9b5805(0x149)]['needCMD']==0xe4||_0x4d4c94[_0x9b5805(0x149)][_0x9b5805(0x140)]==0xf4||_0x4d4c94[_0x9b5805(0x149)][_0x9b5805(0x140)]==0x71)&&_0x4d4c94[_0x9b5805(0x149)][_0x9b5805(0x17b)][_0x9b5805(0x16b)](a0_0x43e456['JCSDK_PRINT_ERR_DISCONNECT'],_0x4d4c94['manager']['printer']['printErrorInfoCallback']),_0x4d4c94[_0x9b5805(0x176)]!=null&&_0x4d4c94['bleDevice'][_0x9b5805(0x17d)]!=null&&(_0x4d4c94[_0x9b5805(0x176)][_0x9b5805(0x17d)]=null,_0x4d4c94[_0x9b5805(0x176)]=null,_0x4d4c94[_0x9b5805(0x12e)]&&_0x4d4c94[_0x9b5805(0x12e)]())),(_0x4d4c94['manager']['debug']&0x1)==0x1&&(console[_0x9b5805(0x159)]('适配器状态发送变化:'),console['log'](_0x43fe44));});},'reciveCmd':function(_0x4572c5,_0x2c2d8b){const _0x38d442=a0_0xe0b2af;switch(_0x4572c5){case 0xc2:{if(this[_0x38d442(0x149)]['needCMD']==0xc2){if(_0x2c2d8b==0x2||_0x2c2d8b==0x1||_0x2c2d8b==0x3){this[_0x38d442(0x14c)]&&clearTimeout(this[_0x38d442(0x14c)]);if(_0x2c2d8b==0x1){if(this[_0x38d442(0x12e)]){let _0x26778e=this;var _0x5e651c=this[_0x38d442(0x12e)];this['openPrinterCallbackFaill']=function(){const _0x1ef9b6=_0x38d442;_0x26778e['bleDevice']=null,_0x26778e[_0x1ef9b6(0x149)][_0x1ef9b6(0x17b)]=null,_0x5e651c();};}wx['closeBLEConnection']({'deviceId':this[_0x38d442(0x176)][_0x38d442(0x17d)]});return;}this[_0x38d442(0x149)]['agreement']=_0x2c2d8b;let _0x3da2bd=this;this['manager'][_0x38d442(0x174)]=function(){const _0xf2a993=_0x38d442;_0x3da2bd['repeatTimeoutId']>0x0&&(clearTimeout(_0x3da2bd[_0xf2a993(0x14c)]),_0x3da2bd[_0xf2a993(0x14c)]=null);let _0x3d1207=a0_0x2b97b2[_0xf2a993(0x18d)](0x40,0x8);_0x3da2bd[_0xf2a993(0x149)][_0xf2a993(0x140)]=0x48,_0x3da2bd[_0xf2a993(0x17e)](_0x3d1207,0x9,()=>{const _0x4d24ff=_0xf2a993;if(_0x3da2bd['openPrinterCallbackFaill']){var _0x39b67e=_0x3da2bd[_0x4d24ff(0x12e)];_0x3da2bd[_0x4d24ff(0x12e)]=function(){const _0x25812b=_0x4d24ff;_0x3da2bd[_0x25812b(0x176)]=null,_0x3da2bd['manager'][_0x25812b(0x17b)]=null,_0x39b67e();};}wx[_0x4d24ff(0x150)]({'deviceId':_0x3da2bd[_0x4d24ff(0x176)][_0x4d24ff(0x17d)]});});},this['manager'][_0x38d442(0x140)]=0xb5;let _0x2eb689=a0_0x2b97b2[_0x38d442(0x18d)](0xa5,0x1);this[_0x38d442(0x17e)](_0x2eb689,0x9,()=>{const _0x489477=_0x38d442;if(_0x3da2bd['openPrinterCallbackFaill']){var _0x39930a=_0x3da2bd['openPrinterCallbackFaill'];_0x3da2bd[_0x489477(0x12e)]=function(){const _0x714809=_0x489477;_0x3da2bd[_0x714809(0x176)]=null,_0x3da2bd['manager'][_0x714809(0x17b)]=null,_0x39930a();};}wx['closeBLEConnection']({'deviceId':_0x3da2bd[_0x489477(0x176)][_0x489477(0x17d)]});});}}}break;case 0x48:{this[_0x38d442(0x149)][_0x38d442(0x140)]==0x48&&(this[_0x38d442(0x14c)]&&clearTimeout(this[_0x38d442(0x14c)]),this['manager'][_0x38d442(0x17c)](_0x2c2d8b));}break;default:break;}},'openStatus':function(_0x45af1b){const _0x398414=a0_0xe0b2af;if(_0x45af1b)this[_0x398414(0x12d)]&&this[_0x398414(0x12d)]();else{this['bleDevice']&&this[_0x398414(0x176)][_0x398414(0x17d)]&&wx[_0x398414(0x150)]({'deviceId':this[_0x398414(0x176)][_0x398414(0x17d)],'succ':_0x19be19=>{},'fail':_0x198a42=>{},'complete':()=>{}});if(this[_0x398414(0x12e)]){let _0x55580b=this['openPrinterCallbackFaill'];this[_0x398414(0x12e)]=null,_0x55580b();}}}};export default Ble;